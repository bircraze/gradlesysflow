project.ext {
    prop = { p ->
        return properties[p] ? properties[p] : ""
    }

    tpl_env_default = [
        parties: genSubList(), 
        steps: [
            reset: [
                parallel: true,
                cmd: "git",
                subcmd: "reset",
                args: ["--hard"]
            ],
            checkout: [
                parallel: true,
                cmd: "git",
                subcmd: "checkout",
                args: [":::tag:::"],
                tag: "OVERRIDE" 
            ],
            mytest: [
                parallel: true,
                cmd: "gradle",
                subcmd: "myTest",
                args: ["-Pdummy=${prop('dummy')}", "-Pver=:::ver:::"],
                ver: "OVERRIDE"
            ]
        ]
    ]
}

def genSubList() {
    def subArr = []
    for (each in subprojects) {
        subArr.add((String) each)
    }
    
    return subArr.collect { it.split(":")[1].replaceAll("\'", "") }
}
